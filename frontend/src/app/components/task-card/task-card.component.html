<div class="task-card" draggable="true" (click)="toggleActions($event)">
  <div class="task-content">
    <h3 class="task-title">{{ task.title }}</h3>
    <p class="task-description" *ngIf="task.description" [innerHTML]="task.description | linkify"></p>
  </div>
  
  <div class="task-meta" *ngIf="task.recurrence_type !== 'none'">
    <span class="recurrence-badge">
      ğŸ”„ {{ getRecurrenceInfo() }}
    </span>
  </div>

  <!-- Mobile-friendly status actions -->
  <div class="task-actions" [class.visible]="showActions">
    <!-- Show "previous status" button if available -->
    <button
      *ngIf="getPrevStatus()"
      class="action-btn prev"
      (click)="moveToStatus(getPrevStatus()!, $event)"
      [title]="'Verschieben zu: ' + statusLabels[getPrevStatus()!]"
    >
      â† {{ statusLabels[getPrevStatus()!] }}
    </button>

    <!-- For "zu_erledigen" tasks: show both "in progress" and "done" options -->
    <ng-container *ngIf="task.status === 'zu_erledigen'">
      <button
        class="action-btn next"
        (click)="moveToStatus('mach_ich_gerade', $event)"
        title="Verschieben zu: Mach ich gerade"
      >
        {{ statusLabels['mach_ich_gerade'] }} â†’
      </button>
      <button
        class="action-btn done"
        (click)="moveToStatus('erledigt', $event)"
        title="Direkt erledigen"
      >
        {{ statusLabels['erledigt'] }} âœ“
      </button>
    </ng-container>

    <!-- For other statuses: show only next status button -->
    <button
      *ngIf="task.status !== 'zu_erledigen' && getNextStatus()"
      class="action-btn next"
      (click)="moveToStatus(getNextStatus()!, $event)"
      [title]="'Verschieben zu: ' + statusLabels[getNextStatus()!]"
    >
      {{ statusLabels[getNextStatus()!] }} â†’
    </button>
  </div>
  
  <div class="tap-hint" *ngIf="!showActions">
    <span>Tippen fÃ¼r Aktionen</span>
  </div>
</div>
